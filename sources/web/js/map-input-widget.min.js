function MapInputWidgetManager(){const t=".garixi-map-input-widget";var e=Array(),a=function(t){if(!$(t).data("initialized")){var e=new MapInputWidget(t);return e.initialize(),e}return null},n=function(t){var a=t.getId();e[a]=t};this.initializeWidgets=function(){$(t).each(function(t,e){var i=a(e);currWidget=i,i&&n(i)})},this.getWidget=function(t){var a=e[t];return a}}function MapInputWidget(t){const e="input.garixi-map-input-widget-input",a="div.garixi-map-input-widget-canvas";var n,i,o=this,r=function(){n=$(t).find(e).get(0),i=$(t).find(a).get(0)},d=function(){geocoder=new google.maps.Geocoder,map=new google.maps.Map(i,{mapTypeId:$(t).data("map-type"),center:m(),zoom:$(t).data("zoom"),styles:[{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeControlOptions:{mapTypeIds:[]}}),google.maps.event.addListener(map,"click",function(t){o.setPosition({latitude:t.latLng.lat(),longitude:t.latLng.lng()})})},u=function(){var e=g();o.setPosition(e),$(t).data("initialized",!0)},l=function(t){var e=c(),a=f(t);return e=e.replace(/%latitude%/g,a.lat()),e=e.replace(/%longitude%/g,a.lng())},p=function(){var t=""!=$(n).prop("value");return t},g=function(){var t,e=c(),a=$(n).prop("value");if(""!==a){var i=e.indexOf("%latitude%"),o=e.indexOf("%longitude%"),r=o>i,d=r?0:1,u=r?1:0,l=a.match(/-?\d+(\.\d+)?/g)[d],p=a.match(/-?\d+(\.\d+)?/g)[u];t=new google.maps.LatLng(l,p)}else t=null;return t},s=function(){var e=$(t).data("latitude"),a=$(t).data("longitude"),n=new google.maps.LatLng(e,a);return n},m=function(){var t;return t=p()?g():s()},c=function(){var e=$(t).data("pattern");return e},f=function(t){var e;if(void 0!==t.latitude&&void 0!==t.longitude){var a=t.latitude,n=t.longitude;e=new google.maps.LatLng(a,n)}else e=t;return e};this.initialize=function(){r(),d(),u()},this.getId=function(){var e=$(t).prop("id");return e},this.setPosition=function(e){if(map.marker&&map.marker.setMap(null),null===e)return void $(n).prop("disabled",!0);$(n).prop("disabled",!1);var a=f(e);1===$(t).data("align-map-center")&&map.panTo(a);var i=null;1===$(t).data("animate-marker")&&(i=google.maps.Animation.DROP),map.marker=new google.maps.Marker({map:map,position:a,draggable:!0,animation:i}),google.maps.event.addListener(map.marker,"dragend",function(){o.setPosition(this.getPosition())});var r=($(t).data("pattern"),l(a));$(n).prop("value",r),$(".latitude").val(a.G),$(".longitude").val(a.K)},this.panTo=function(t){var e=f(t);map.panTo(e)},this.setZoom=function(t){map.setZoom(t)}}var mapInputWidgetManager,map;$(window).load(function(){mapInputWidgetManager=new MapInputWidgetManager,mapInputWidgetManager.initializeWidgets(),$("#addresscompletion").autocomplete({source:function(t,e){geocoder.geocode({address:t.term},function(t){e($.map(t,function(t){return{label:t.formatted_address,value:t.formatted_address,latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng(),components:t.address_components}}))})},select:function(t,e){$(".latitude").val(e.item.latitude),$(".longitude").val(e.item.longitude);for(var a,n=e.item.components,i=0;a=n[i];i++)console.log(a),"locality"==a.types[0]&&$(".city").val(a.long_name);var o=new google.maps.LatLng(e.item.latitude,e.item.longitude);currWidget.setPosition(o),map.setCenter(o),map.setZoom(16)}}),$(window).resize(function(){setTimeout(function(){google.maps.event.trigger(map,"resize")},300)})});